(()=>{"use strict";const e=document.getElementById("welcome"),t=document.getElementById("createBtn"),n=document.getElementById("reloadBtn"),o=document.getElementById("roomList");fetch("/getId",{method:"POST",headers:{Content_Type:"application/json"}}).then((e=>e.json())).then((t=>{t&&(e.innerText=`Welcome! ${t.id}`)}));const d=()=>{fetch("/getRooms",{method:"POST",headers:{Content_Type:"application/json"}}).then((e=>e.json())).then((e=>{e&&(o.replaceChildren(),e.roomData.forEach((e=>{const t=document.createElement("div"),n=document.createElement("div"),d=document.createElement("div");t.classList.add("room"),n.classList.add("roomName"),d.classList.add("roomDescription"),n.innerText=`${e.name}  (${e.current}/${e.max})`,d.innerText=` owner: ${e.owner}`,t.append(n,d),o.append(t),t.addEventListener("click",(()=>{const t={roomUid:e.uid,roomName:e.name};fetch("/joinRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{e&&("succeeded"===e.response?location.replace(e.redirectURL):alert("To many players!"))}))}))})))}))};d(),n.addEventListener("click",(()=>{d()})),t.addEventListener("click",(()=>{const e={roomName:document.getElementById("name").value,roomPassword:document.getElementById("password").value};fetch("/createRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e&&("succeeded"===e.response?location.replace(e.redirectURL):alert("Name of room must be no space and 1~20 letter and password must be 0~8 letter"))}))}))})();